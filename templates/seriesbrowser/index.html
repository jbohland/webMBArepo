{% extends "base.html" %}

{% block content %}
{% if series_page %}
    <div class="filter">
        <form action="/seriesbrowser/" method="get">{% csrf_token %}
        <div class="fieldWrapper">
        {{ form.subject.errors }}
        <label for="id_filter">Tracer:</label>
        {{ form.filter }}
        <input type="submit" value="Filter" />
        </form>
    </div>
    </div>
    <div class="pagination">
    <span class="step-links">
        {% if series_page.has_previous %}
            <a href="?page={{ series_page.previous_page_number }}&sort={{ sort }}_{{ dir }}{% if filter %}&filter={{ filter }}{% endif %}">prev</a>
        {% endif %}

        <span class="current">
            Page {{ series_page.number }} of {{ series_page.paginator.num_pages }}
        </span>

        {% if series_page.has_next %}
            <a href="?page={{ series_page.next_page_number }}&sort={{ sort }}_{{ dir }}{% if filter %}&filter={{ filter }}{% endif %}">next</a>
        {% endif %}
    </span>
    </div>
    <table width="100%" cellpadding="0" cellspacing="0">
    <tr>
        <td><a href="?sort=name_{% if sort == 'name' and dir == 'asc'%}desc{% else %}asc{% endif %}{% if filter %}&filter={{ filter }}{% endif %}">Series Name</a></td>
        <td></td>
        <td><a href="?sort=region_{% if sort == 'region' and dir == 'asc'%}desc{% else %}asc{% endif %}{% if filter %}&filter={{ filter }}{% endif %}">Inj Region</a></td>
        <td>Inj Coords (<a href="?sort=coordx_{% if sort == 'coordx' and dir == 'asc'%}desc{% else %}asc{% endif %}{% if filter %}&filter={{ filter }}{% endif %}">X</a>,
            <a href="?sort=coordy_{% if sort == 'coordy' and dir == 'asc'%}desc{% else %}asc{% endif %}{% if filter %}&filter={{ filter }}{% endif %}">Y</a>,
            <a href="?sort=coordz_{% if sort == 'coordz' and dir == 'asc'%}desc{% else %}asc{% endif %}{% if filter %}&filter={{ filter }}{% endif %}">Z</a>)</td>
        <td><a href="?sort=tracer_{% if sort == 'tracer' and dir == 'asc'%}desc{% else %}asc{% endif %}{% if filter %}&filter={{ filter }}{% endif %}">Tracer Type</a></td>
        <td>Image Type</td>
        <td>QC Sections</td>
    </tr>
    {% for series in series_page.object_list %}
        <tr>
            <td>{{ series.0 }}</td>
            <td><img src="/static/img/slice.jpg" /></td>
            <td>{{ series.1 }}</td>
            <td>x:{{ series.2 }} y:{{ series.3 }} z:{{ series.4 }}</td>
            <td>{{ series.5 }}</td>
            <td>{{ 'fluoro/brightfield' }}</td>
            <td>{{ '# qc sections' }}</td>
        </tr>
    {% endfor %}
    </table>
    <div class="pagination">
    <span class="step-links">
        {% if series_page.has_previous %}
            <a href="?page={{ series_page.previous_page_number }}&sort={{ sort }}_{{ dir }}">prev</a>
        {% endif %}

        <span class="current">
            Page {{ series_page.number }} of {{ series_page.paginator.num_pages }}
        </span>

        {% if series_page.has_next %}
            <a href="?page={{ series_page.next_page_number }}&sort={{ sort }}_{{ dir }}">next</a>
        {% endif %}
    </span>
    </div>
{% else %}
    <p>No injection series are available.</p>
{% endif %}
{% endblock content %}